utskrevet_dod = sum(hosp_dischg_dest == 3, na.rm = TRUE),
dod_etter_30_dg = sum(res_survival == 1, na.rm = TRUE),
nodintervensjon = sum(ed_emerg_proc != -1 & ed_emerg_proc != 999, na.rm = TRUE),
barn_registrert = sum(PatientAge < 18, na.rm = TRUE),
over_65 = sum(PatientAge > 65, na.rm = TRUE),
penetrerende_skader = sum(inj_penetrating == 1, na.rm = TRUE),
CT = sum(ed_ct == 1, na.rm = TRUE),
rontgen_thorax = sum(xray_chst == 1, na.rm = TRUE),
rontgen_bekken = sum(xray_pelv == 1, na.rm = TRUE),
Fast = sum(ed_ultralyd_fast == 1, na.rm = TRUE),
ISS_over_16 = sum(inj_iss >= 16, na.rm = TRUE),
NISS_over_16 = sum(inj_niss >= 16, na.rm = TRUE),
overflyttet_traumesenter = sum(hosp_dischg_dest == 4, na.rm = TRUE),
overflyttet_andre_sykehus = sum(hosp_dischg_dest %in% c(5,6,8), na.rm = TRUE),
utskrevet_rehab = sum(hosp_dischg_dest %in% c(2,7), na.rm = TRUE),
.groups = 'drop'
) %>% arrange(
desc(month)
) %>%
mutate(
month = format(month, "%Y-%m"),
month = as.character(month)
)
# antall_total <- total %>%
#   dplyr::mutate(year = 2023) %>%
#   filter(
#     HealthUnitShortName %in% c("Kristiansand"),
#     year >= floor_date(Sys.Date() - years(2), "year"),
#     !is.na(year)
#   ) %>%  # Remove rows where time_period is NA
#   group_by(year) %>%
#   summarise(
#     registrert = sum(n(), na.rm = TRUE),
#     traumeteam = sum(ed_tta == 1, na.rm = TRUE),
#     undertriage = sum(inj_iss >= 15, ed_tta == 2, na.rm = TRUE),
#     utskrevet_dod = sum(hosp_dischg_dest == 3, na.rm = TRUE),
#     dod_etter_30_dg = sum(res_survival == 1, na.rm = TRUE),
#     nodintervensjon = sum(ed_emerg_proc != -1 & ed_emerg_proc != 999, na.rm = TRUE),
#     barn_registrert = sum(PatientAge < 18, na.rm = TRUE),
#     over_65 = sum(PatientAge > 65, na.rm = TRUE),
#     penetrerende_skader = sum(inj_penetrating == 1, na.rm = TRUE),
#     CT = sum(ed_ct == 1, na.rm = TRUE),
#     rontgen_thorax = sum(xray_chst == 1, na.rm = TRUE),
#     rontgen_bekken = sum(xray_pelv == 1, na.rm = TRUE),
#     Fast = sum(ed_ultralyd_fast == 1, na.rm = TRUE),
#     ISS_over_16 = sum(inj_iss >= 16, na.rm = TRUE),
#     NISS_over_16 = sum(inj_niss >= 16, na.rm = TRUE),
#     overflyttet_traumesenter = sum(hosp_dischg_dest == 4, na.rm = TRUE),
#     overflyttet_andre_sykehus = sum(hosp_dischg_dest %in% c(5,6,8), na.rm = TRUE),
#     utskrevet_rehab = sum(hosp_dischg_dest %in% c(2,7), na.rm = TRUE),
#     .groups = 'drop'
#   ) %>% arrange(
#     -year
#   ) %>% mutate(
#     month = as.character(year)
#   ) %>% select(
#     -year
#   ) %>% bind_rows(
#     antall_month,.
#   ) %>% pivot_longer(
#     cols = -month, names_to = "Kategori", values_to = "value"
#   ) %>% pivot_wider(
#     names_from = month, values_from = value
#   )
#
# antall_total <- antall_total %>%
#   mutate(Kategori = case_when(
#     Kategori == "registrert" ~ "Registrert i registeret",
#     Kategori == "traumeteam" ~ "Motatt med traumeteam",
#     Kategori == "undertriage" ~ "Undertriagerte",
#     Kategori == "utskrevet_dod" ~ "Utskrevet død",
#     Kategori == "dod_etter_30_dg" ~ "Død etter 30 dager",
#     Kategori == "nodintervensjon" ~ "Utført nødintervensjon",
#     Kategori == "barn_registrert" ~ "Barn registrert",
#     Kategori == "over_65" ~ "Over 65 registrert",
#     Kategori == "penetrerende_skader" ~ "Registrert med penetrerende skade",
#     Kategori == "CT" ~ "CT utført",
#     Kategori == "rontgen_thorax" ~ "Røntgen thorax utført",
#     Kategori == "rontgen_bekken" ~ "Røntgen bekken utført",
#     Kategori == "Fast" ~ "Fast utført",
#     Kategori == "ISS_over_16" ~ "Pasienter med ISS-score på 16 eller over",
#     Kategori == "NISS_over_16" ~ "Pasienter med NISS-score på 16 eller over",
#     Kategori == "overflyttet_traumesenter" ~ "Overflyttet til traumesenter",
#     Kategori == "overflyttet_andre_sykehus" ~ "Overflyttet til andre sykehus",
#     Kategori == "utskrevet_rehab" ~ "Utskrevet til rehabelitering",
#   ))
#
#return(antall_total)
return(antall_month)
}
x <- tabell_fremside(total, "700264")
tabell_fremside <- function(total, userUnitId) {
antall_month <- total %>%
mutate(month = Sys.Date()) %>%
filter(
UnitId %in% c({{userUnitId}}), #LEGG INN BRUKERENS SYKEHUSTILHØRIGHET??
month >= floor_date(Sys.Date() - months(9), "month"),
acc_overflyttet == 2,
!is.na(month)
) %>%
group_by(month) %>%
summarise(
registrert = sum(n(), na.rm = TRUE),
traumeteam = sum(ed_tta == 1, na.rm = TRUE),
undertriage = sum(inj_iss >= 15, ed_tta == 2, na.rm = TRUE),
utskrevet_dod = sum(hosp_dischg_dest == 3, na.rm = TRUE),
dod_etter_30_dg = sum(res_survival == 1, na.rm = TRUE),
nodintervensjon = sum(ed_emerg_proc != -1 & ed_emerg_proc != 999, na.rm = TRUE),
barn_registrert = sum(PatientAge < 18, na.rm = TRUE),
over_65 = sum(PatientAge > 65, na.rm = TRUE),
penetrerende_skader = sum(inj_penetrating == 1, na.rm = TRUE),
CT = sum(ed_ct == 1, na.rm = TRUE),
rontgen_thorax = sum(xray_chst == 1, na.rm = TRUE),
rontgen_bekken = sum(xray_pelv == 1, na.rm = TRUE),
Fast = sum(ed_ultralyd_fast == 1, na.rm = TRUE),
ISS_over_16 = sum(inj_iss >= 16, na.rm = TRUE),
NISS_over_16 = sum(inj_niss >= 16, na.rm = TRUE),
overflyttet_traumesenter = sum(hosp_dischg_dest == 4, na.rm = TRUE),
overflyttet_andre_sykehus = sum(hosp_dischg_dest %in% c(5,6,8), na.rm = TRUE),
utskrevet_rehab = sum(hosp_dischg_dest %in% c(2,7), na.rm = TRUE),
.groups = 'drop'
) %>% arrange(
desc(month)
) %>%
mutate(
month = format(month, "%Y-%m"),
month = as.character(month)
)
antall_total <- total %>%
dplyr::mutate(year = 2023) %>%
filter(
UnitId %in% c({{userUnitId}}),
year >= floor_date(Sys.Date() - years(2), "year"),
!is.na(year)
) %>%  # Remove rows where time_period is NA
group_by(year) %>%
summarise(
registrert = sum(n(), na.rm = TRUE),
traumeteam = sum(ed_tta == 1, na.rm = TRUE),
undertriage = sum(inj_iss >= 15, ed_tta == 2, na.rm = TRUE),
utskrevet_dod = sum(hosp_dischg_dest == 3, na.rm = TRUE),
dod_etter_30_dg = sum(res_survival == 1, na.rm = TRUE),
nodintervensjon = sum(ed_emerg_proc != -1 & ed_emerg_proc != 999, na.rm = TRUE),
barn_registrert = sum(PatientAge < 18, na.rm = TRUE),
over_65 = sum(PatientAge > 65, na.rm = TRUE),
penetrerende_skader = sum(inj_penetrating == 1, na.rm = TRUE),
CT = sum(ed_ct == 1, na.rm = TRUE),
rontgen_thorax = sum(xray_chst == 1, na.rm = TRUE),
rontgen_bekken = sum(xray_pelv == 1, na.rm = TRUE),
Fast = sum(ed_ultralyd_fast == 1, na.rm = TRUE),
ISS_over_16 = sum(inj_iss >= 16, na.rm = TRUE),
NISS_over_16 = sum(inj_niss >= 16, na.rm = TRUE),
overflyttet_traumesenter = sum(hosp_dischg_dest == 4, na.rm = TRUE),
overflyttet_andre_sykehus = sum(hosp_dischg_dest %in% c(5,6,8), na.rm = TRUE),
utskrevet_rehab = sum(hosp_dischg_dest %in% c(2,7), na.rm = TRUE),
.groups = 'drop'
) %>% arrange(
-year
) %>% mutate(
month = as.character(year)
) %>% select(
-year
) %>% bind_rows(
antall_month,.
) %>% pivot_longer(
cols = -month, names_to = "Kategori", values_to = "value"
) %>% pivot_wider(
names_from = month, values_from = value
)
antall_total <- antall_total %>%
mutate(Kategori = case_when(
Kategori == "registrert" ~ "Registrert i registeret",
Kategori == "traumeteam" ~ "Motatt med traumeteam",
Kategori == "undertriage" ~ "Undertriagerte",
Kategori == "utskrevet_dod" ~ "Utskrevet død",
Kategori == "dod_etter_30_dg" ~ "Død etter 30 dager",
Kategori == "nodintervensjon" ~ "Utført nødintervensjon",
Kategori == "barn_registrert" ~ "Barn registrert",
Kategori == "over_65" ~ "Over 65 registrert",
Kategori == "penetrerende_skader" ~ "Registrert med penetrerende skade",
Kategori == "CT" ~ "CT utført",
Kategori == "rontgen_thorax" ~ "Røntgen thorax utført",
Kategori == "rontgen_bekken" ~ "Røntgen bekken utført",
Kategori == "Fast" ~ "Fast utført",
Kategori == "ISS_over_16" ~ "Pasienter med ISS-score på 16 eller over",
Kategori == "NISS_over_16" ~ "Pasienter med NISS-score på 16 eller over",
Kategori == "overflyttet_traumesenter" ~ "Overflyttet til traumesenter",
Kategori == "overflyttet_andre_sykehus" ~ "Overflyttet til andre sykehus",
Kategori == "utskrevet_rehab" ~ "Utskrevet til rehabelitering",
))
return(antall_total)
}
x <- tabell_fremside(total, "700264")
View(x)
runApp('R')
runApp('R')
traume::tabell_fremside()
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
View(map_db_resh)
runApp('R')
runApp('R')
Sys.setenv(FALK_EXTENDED_USER_RIGHTS="[{\"A\":88,\"R\":\"SC\",\"U\":707264},
{\"A\":88,\"R\":\"LC\",\"U\":707264},
{\"A\":88,\"R\":\"LU\",\"U\":707264},
{\"A\":88,\"R\":\"SC\",\"U\":108354},
{\"A\":88,\"R\":\"LC\",\"U\":108354},
{\"A\":88,\"R\":\"LU\",\"U\":108354},
{\"A\":88,\"R\":\"SC\",\"U\":4001071},
{\"A\":88,\"R\":\"LC\",\"U\":4001071},
{\"A\":88,\"R\":\"LU\",\"U\":4001071},
{\"A\":88,\"R\":\"SC\",\"U\":4204082},
{\"A\":88,\"R\":\"LC\",\"U\":4204082},
{\"A\":88,\"R\":\"LU\",\"U\":4204082},
{\"A\":88,\"R\":\"SC\",\"U\":4204084},
{\"A\":88,\"R\":\"LC\",\"U\":4204084},
{\"A\":88,\"R\":\"LU\",\"U\":4204084},
{\"A\":88,\"R\":\"SC\",\"U\":102021},
{\"A\":88,\"R\":\"LC\",\"U\":102021},
{\"A\":88,\"R\":\"LU\",\"U\":102021},
{\"A\":88,\"R\":\"SC\",\"U\":700263},
{\"A\":88,\"R\":\"LC\",\"U\":700263},
{\"A\":88,\"R\":\"LU\",\"U\":700263},
{\"A\":88,\"R\":\"SC\",\"U\":108597},
{\"A\":88,\"R\":\"LC\",\"U\":108597},
{\"A\":88,\"R\":\"LU\",\"U\":108597},
{\"A\":88,\"R\":\"SC\",\"U\":101891},
{\"A\":88,\"R\":\"LC\",\"U\":101891},
{\"A\":88,\"R\":\"LU\",\"U\":101891},
{\"A\":88,\"R\":\"SC\",\"U\":708761},
{\"A\":88,\"R\":\"LC\",\"U\":708761},
{\"A\":88,\"R\":\"LU\",\"U\":708761},
{\"A\":88,\"R\":\"SC\",\"U\":700722},
{\"A\":88,\"R\":\"LC\",\"U\":700722},
{\"A\":88,\"R\":\"LU\",\"U\":700722},
{\"A\":88,\"R\":\"SC\",\"U\":102141},
{\"A\":88,\"R\":\"LC\",\"U\":102141},
{\"A\":88,\"R\":\"LU\",\"U\":102141},
{\"A\":88,\"R\":\"SC\",\"U\":102250},
{\"A\":88,\"R\":\"LC\",\"U\":102250},
{\"A\":88,\"R\":\"LU\",\"U\":102250},
{\"A\":88,\"R\":\"SC\",\"U\":700330},
{\"A\":88,\"R\":\"LC\",\"U\":700330},
{\"A\":88,\"R\":\"LU\",\"U\":700330},
{\"A\":88,\"R\":\"SC\",\"U\":108355},
{\"A\":88,\"R\":\"LC\",\"U\":108355},
{\"A\":88,\"R\":\"LU\",\"U\":108355},
{\"A\":88,\"R\":\"SC\",\"U\":102090},
{\"A\":88,\"R\":\"LC\",\"U\":102090},
{\"A\":88,\"R\":\"LU\",\"U\":102090},
{\"A\":88,\"R\":\"SC\",\"U\":4204998},
{\"A\":88,\"R\":\"LC\",\"U\":4204998},
{\"A\":88,\"R\":\"LU\",\"U\":4204998},
{\"A\":88,\"R\":\"SC\",\"U\":700264},
{\"A\":88,\"R\":\"LC\",\"U\":700264},
{\"A\":88,\"R\":\"LU\",\"U\":700264},
{\"A\":88,\"R\":\"SC\",\"U\":700728},
{\"A\":88,\"R\":\"LC\",\"U\":700728},
{\"A\":88,\"R\":\"LU\",\"U\":700728},
{\"A\":88,\"R\":\"SC\",\"U\":4207827},
{\"A\":88,\"R\":\"LC\",\"U\":4207827},
{\"A\":88,\"R\":\"LU\",\"U\":4207827},
{\"A\":88,\"R\":\"SC\",\"U\":100315},
{\"A\":88,\"R\":\"LC\",\"U\":100315},
{\"A\":88,\"R\":\"LU\",\"U\":100315},
{\"A\":88,\"R\":\"SC\",\"U\":4211820},
{\"A\":88,\"R\":\"LC\",\"U\":4211820},
{\"A\":88,\"R\":\"LU\",\"U\":4211820},
{\"A\":88,\"R\":\"SC\",\"U\":108357},
{\"A\":88,\"R\":\"LC\",\"U\":108357},
{\"A\":88,\"R\":\"LU\",\"U\":108357},
{\"A\":88,\"R\":\"SC\",\"U\":105893},
{\"A\":88,\"R\":\"LC\",\"U\":105893},
{\"A\":88,\"R\":\"LU\",\"U\":105893},
{\"A\":88,\"R\":\"SC\",\"U\":700721},
{\"A\":88,\"R\":\"LC\",\"U\":700721},
{\"A\":88,\"R\":\"LU\",\"U\":700721},
{\"A\":88,\"R\":\"SC\",\"U\":4204083},
{\"A\":88,\"R\":\"LC\",\"U\":4204083},
{\"A\":88,\"R\":\"LU\",\"U\":4204083},
{\"A\":88,\"R\":\"SC\",\"U\":4204500},
{\"A\":88,\"R\":\"LC\",\"U\":4204500},
{\"A\":88,\"R\":\"LU\",\"U\":4204500},
{\"A\":88,\"R\":\"SC\",\"U\":102145},
{\"A\":88,\"R\":\"LC\",\"U\":102145},
{\"A\":88,\"R\":\"LU\",\"U\":102145},
{\"A\":88,\"R\":\"SC\",\"U\":701404},
{\"A\":88,\"R\":\"LC\",\"U\":701404},
{\"A\":88,\"R\":\"LU\",\"U\":701404},
{\"A\":88,\"R\":\"SC\",\"U\":706267},
{\"A\":88,\"R\":\"LC\",\"U\":706267},
{\"A\":88,\"R\":\"LU\",\"U\":706267},
{\"A\":88,\"R\":\"SC\",\"U\":108600},
{\"A\":88,\"R\":\"LC\",\"U\":108600},
{\"A\":88,\"R\":\"LU\",\"U\":108600},
{\"A\":88,\"R\":\"SC\",\"U\":708763},
{\"A\":88,\"R\":\"LC\",\"U\":708763},
{\"A\":88,\"R\":\"LU\",\"U\":708763},
{\"A\":88,\"R\":\"SC\",\"U\":101823},
{\"A\":88,\"R\":\"LC\",\"U\":101823},
{\"A\":88,\"R\":\"LU\",\"U\":101823},
{\"A\":88,\"R\":\"SC\",\"U\":706264},
{\"A\":88,\"R\":\"LC\",\"U\":706264},
{\"A\":88,\"R\":\"LU\",\"U\":706264},
{\"A\":88,\"R\":\"SC\",\"U\":706268},
{\"A\":88,\"R\":\"LC\",\"U\":706268},
{\"A\":88,\"R\":\"LU\",\"U\":706268},
{\"A\":88,\"R\":\"SC\",\"U\":700265},
{\"A\":88,\"R\":\"LC\",\"U\":700265},
{\"A\":88,\"R\":\"LU\",\"U\":700265},
{\"A\":88,\"R\":\"SC\",\"U\":0},
{\"A\":88,\"R\":\"LC\",\"U\":0},
{\"A\":88,\"R\":\"LU\",\"U\":0},
{\"A\":88,\"R\":\"SC\",\"U\":100133},
{\"A\":88,\"R\":\"LC\",\"U\":100133},
{\"A\":88,\"R\":\"LU\",\"U\":100133},
{\"A\":88,\"R\":\"SC\",\"U\":102939},
{\"A\":88,\"R\":\"LC\",\"U\":102939},
{\"A\":88,\"R\":\"LU\",\"U\":102939},
{\"A\":88,\"R\":\"SC\",\"U\":4207554},
{\"A\":88,\"R\":\"LC\",\"U\":4207554},
{\"A\":88,\"R\":\"LU\",\"U\":4207554},
{\"A\":88,\"R\":\"SC\",\"U\":701434},
{\"A\":88,\"R\":\"LC\",\"U\":701434},
{\"A\":88,\"R\":\"LU\",\"U\":701434}
]")
Sys.setenv(FALK_EXTENDED_USER_RIGHTS="[{\"A\":88,\"R\":\"SC\",\"U\":707264},
{\"A\":88,\"R\":\"LC\",\"U\":707264},
{\"A\":88,\"R\":\"LU\",\"U\":707264},
{\"A\":88,\"R\":\"SC\",\"U\":108354},
{\"A\":88,\"R\":\"LC\",\"U\":108354},
{\"A\":88,\"R\":\"LU\",\"U\":108354},
{\"A\":88,\"R\":\"SC\",\"U\":4001071},
{\"A\":88,\"R\":\"LC\",\"U\":4001071},
{\"A\":88,\"R\":\"LU\",\"U\":4001071},
{\"A\":88,\"R\":\"SC\",\"U\":4204082},
{\"A\":88,\"R\":\"LC\",\"U\":4204082},
{\"A\":88,\"R\":\"LU\",\"U\":4204082},
{\"A\":88,\"R\":\"SC\",\"U\":4204084},
{\"A\":88,\"R\":\"LC\",\"U\":4204084},
{\"A\":88,\"R\":\"LU\",\"U\":4204084},
{\"A\":88,\"R\":\"SC\",\"U\":102021},
{\"A\":88,\"R\":\"LC\",\"U\":102021},
{\"A\":88,\"R\":\"LU\",\"U\":102021},
{\"A\":88,\"R\":\"SC\",\"U\":700263},
{\"A\":88,\"R\":\"LC\",\"U\":700263},
{\"A\":88,\"R\":\"LU\",\"U\":700263},
{\"A\":88,\"R\":\"SC\",\"U\":108597},
{\"A\":88,\"R\":\"LC\",\"U\":108597},
{\"A\":88,\"R\":\"LU\",\"U\":108597},
{\"A\":88,\"R\":\"SC\",\"U\":101891},
{\"A\":88,\"R\":\"LC\",\"U\":101891},
{\"A\":88,\"R\":\"LU\",\"U\":101891},
{\"A\":88,\"R\":\"SC\",\"U\":708761},
{\"A\":88,\"R\":\"LC\",\"U\":708761},
{\"A\":88,\"R\":\"LU\",\"U\":708761},
{\"A\":88,\"R\":\"SC\",\"U\":700722},
{\"A\":88,\"R\":\"LC\",\"U\":700722},
{\"A\":88,\"R\":\"LU\",\"U\":700722},
{\"A\":88,\"R\":\"SC\",\"U\":102141},
{\"A\":88,\"R\":\"LC\",\"U\":102141},
{\"A\":88,\"R\":\"LU\",\"U\":102141},
{\"A\":88,\"R\":\"SC\",\"U\":102250},
{\"A\":88,\"R\":\"LC\",\"U\":102250},
{\"A\":88,\"R\":\"LU\",\"U\":102250},
{\"A\":88,\"R\":\"SC\",\"U\":700330},
{\"A\":88,\"R\":\"LC\",\"U\":700330},
{\"A\":88,\"R\":\"LU\",\"U\":700330},
{\"A\":88,\"R\":\"SC\",\"U\":108355},
{\"A\":88,\"R\":\"LC\",\"U\":108355},
{\"A\":88,\"R\":\"LU\",\"U\":108355},
{\"A\":88,\"R\":\"SC\",\"U\":102090},
{\"A\":88,\"R\":\"LC\",\"U\":102090},
{\"A\":88,\"R\":\"LU\",\"U\":102090},
{\"A\":88,\"R\":\"SC\",\"U\":4204998},
{\"A\":88,\"R\":\"LC\",\"U\":4204998},
{\"A\":88,\"R\":\"LU\",\"U\":4204998},
{\"A\":88,\"R\":\"SC\",\"U\":700264},
{\"A\":88,\"R\":\"LC\",\"U\":700264},
{\"A\":88,\"R\":\"LU\",\"U\":700264},
{\"A\":88,\"R\":\"SC\",\"U\":700728},
{\"A\":88,\"R\":\"LC\",\"U\":700728},
{\"A\":88,\"R\":\"LU\",\"U\":700728},
{\"A\":88,\"R\":\"SC\",\"U\":4207827},
{\"A\":88,\"R\":\"LC\",\"U\":4207827},
{\"A\":88,\"R\":\"LU\",\"U\":4207827},
{\"A\":88,\"R\":\"SC\",\"U\":100315},
{\"A\":88,\"R\":\"LC\",\"U\":100315},
{\"A\":88,\"R\":\"LU\",\"U\":100315},
{\"A\":88,\"R\":\"SC\",\"U\":4211820},
{\"A\":88,\"R\":\"LC\",\"U\":4211820},
{\"A\":88,\"R\":\"LU\",\"U\":4211820},
{\"A\":88,\"R\":\"SC\",\"U\":108357},
{\"A\":88,\"R\":\"LC\",\"U\":108357},
{\"A\":88,\"R\":\"LU\",\"U\":108357},
{\"A\":88,\"R\":\"SC\",\"U\":105893},
{\"A\":88,\"R\":\"LC\",\"U\":105893},
{\"A\":88,\"R\":\"LU\",\"U\":105893},
{\"A\":88,\"R\":\"SC\",\"U\":700721},
{\"A\":88,\"R\":\"LC\",\"U\":700721},
{\"A\":88,\"R\":\"LU\",\"U\":700721},
{\"A\":88,\"R\":\"SC\",\"U\":4204083},
{\"A\":88,\"R\":\"LC\",\"U\":4204083},
{\"A\":88,\"R\":\"LU\",\"U\":4204083},
{\"A\":88,\"R\":\"SC\",\"U\":4204500},
{\"A\":88,\"R\":\"LC\",\"U\":4204500},
{\"A\":88,\"R\":\"LU\",\"U\":4204500},
{\"A\":88,\"R\":\"SC\",\"U\":102145},
{\"A\":88,\"R\":\"LC\",\"U\":102145},
{\"A\":88,\"R\":\"LU\",\"U\":102145},
{\"A\":88,\"R\":\"SC\",\"U\":701404},
{\"A\":88,\"R\":\"LC\",\"U\":701404},
{\"A\":88,\"R\":\"LU\",\"U\":701404},
{\"A\":88,\"R\":\"SC\",\"U\":706267},
{\"A\":88,\"R\":\"LC\",\"U\":706267},
{\"A\":88,\"R\":\"LU\",\"U\":706267},
{\"A\":88,\"R\":\"SC\",\"U\":108600},
{\"A\":88,\"R\":\"LC\",\"U\":108600},
{\"A\":88,\"R\":\"LU\",\"U\":108600},
{\"A\":88,\"R\":\"SC\",\"U\":708763},
{\"A\":88,\"R\":\"LC\",\"U\":708763},
{\"A\":88,\"R\":\"LU\",\"U\":708763},
{\"A\":88,\"R\":\"SC\",\"U\":101823},
{\"A\":88,\"R\":\"LC\",\"U\":101823},
{\"A\":88,\"R\":\"LU\",\"U\":101823},
{\"A\":88,\"R\":\"SC\",\"U\":706264},
{\"A\":88,\"R\":\"LC\",\"U\":706264},
{\"A\":88,\"R\":\"LU\",\"U\":706264},
{\"A\":88,\"R\":\"SC\",\"U\":706268},
{\"A\":88,\"R\":\"LC\",\"U\":706268},
{\"A\":88,\"R\":\"LU\",\"U\":706268},
{\"A\":88,\"R\":\"SC\",\"U\":700265},
{\"A\":88,\"R\":\"LC\",\"U\":700265},
{\"A\":88,\"R\":\"LU\",\"U\":700265},
{\"A\":88,\"R\":\"SC\",\"U\":0},
{\"A\":88,\"R\":\"LC\",\"U\":0},
{\"A\":88,\"R\":\"LU\",\"U\":0},
{\"A\":88,\"R\":\"SC\",\"U\":100133},
{\"A\":88,\"R\":\"LC\",\"U\":100133},
{\"A\":88,\"R\":\"LU\",\"U\":100133},
{\"A\":88,\"R\":\"SC\",\"U\":102939},
{\"A\":88,\"R\":\"LC\",\"U\":102939},
{\"A\":88,\"R\":\"LU\",\"U\":102939},
{\"A\":88,\"R\":\"SC\",\"U\":4207554},
{\"A\":88,\"R\":\"LC\",\"U\":4207554},
{\"A\":88,\"R\":\"LU\",\"U\":4207554},
{\"A\":88,\"R\":\"SC\",\"U\":701434},
{\"A\":88,\"R\":\"LC\",\"U\":701434},
{\"A\":88,\"R\":\"LU\",\"U\":701434}
]")
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
skade <- data %>% filter(FormTypeId == 9) %>% distinct(HovedskjemaGUID, .keep_all = TRUE) %>% select(all_of(na.exclude(vars_skjema$skade)))
clean_xlsx_data <- function() {
total <- data %>%
mutate(year = year(FormDate),
inj_iss = ifelse(FormTypeId == 1 & is.na(inj_iss), 0, inj_iss),
inj_niss = ifelse(FormTypeId == 1 & is.na(inj_niss), 0, inj_niss),
month = floor_date(as.Date(FormDate), "month"),
quarter = quarter(FormDate, type = "date_first"))
return (total)
}
c <- clean_xlsx_data()
c$year
total <- clean_xlsx_data()
runApp('R')
runApp('R')
runApp('R')
rm(c)
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
runApp('R')
View(map_db_resh)
map_db_resh %>%
filter(UnitId == 707264) %>%
print(orgname)
map_db_resh %>%
filter(UnitId == 707264) %>%
select(orgname)
x <- map_db_resh %>%
filter(UnitId == 707264) %>%
select(orgname)
runApp('R')
library(roxygen2)
get_HealthUnitShortName <- function (UnitId, map_data) {
navn_reaktivt <- map_data %>%
filter(UnitId == {{UnitId}}) %>%
select(orgname)
return(navn_reaktivt)
}
runApp('R')
install.packages("roxygen2")
install.packages("roxygen2")
library(roxygen2)
shiny::runApp('R')
library(magrittr)
runApp('R')
runApp('R')
runApp('R')
